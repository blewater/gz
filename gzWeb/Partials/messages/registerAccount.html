<div class="auth register register-account">
    <div class="row heading">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2 text-center">
            <h2 class="text-gz">Start here!</h2>
            <h4>it only takes 45 seconds!</h4>
        </div>
    </div>
    <div class="row content bg-gz">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2">
            <div class="logo-icon text-center">
                <img src="/Content/Images/logo.svg">
            </div>
        </div>
        <form class="form-horizontal" name="form" ng-submit="submit()" role="form" novalidate>
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <input type="email" placeholder="email@domain.com" id="email" name="email" class="form-control" autocomplete="off" ng-model="model.email" required
                           ng-class="{ 'empty': !model.email, 'danger' : (form.email.$invalid && !form.email.$pristine) || !emailValidation.isAvailable }"
                           ng-focus="onEmailFocus();" ng-blur="onEmailBlur()" autofocus>
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':emailFocused || form.email.$valid}">
                        <i class="fa fa-lg fa-envelope-o"></i>
                    </span>
                    <gz-field-ok gz-when="form.email.$valid && emailValidation.isAvailable" gz-loading="emailValidation.isValidating"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': emailFocused && !emailValidation.error && form.email.$error.required && !form.email.$pristine}">Email address is required</div>
                    <div class="help-block" ng-class="{'show': emailFocused && !emailValidation.error && form.email.$error.email}">Please enter a valid Email address</div>
                    <div class="help-block" ng-class="{'show': emailFocused && emailValidation.error}">{{emailValidation.error}}</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <input type="text" placeholder="username" id="username" name="username" class="form-control" autocomplete="off" ng-model="model.username" required
                           ng-class="{ 'empty': !model.username, 'danger' : (form.username.$invalid && !form.username.$pristine) || !usernameValidation.isAvailable}"
                           ng-focus="onUsernameFocus()" ng-blur="onUsernameBlur()">
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':usernameFocused || form.username.$valid}">
                        <i class="fa fa-lg fa-user"></i>
                    </span>
                    <gz-field-ok gz-when="form.username.$valid && usernameValidation.isAvailable" gz-loading="usernameValidation.isValidating"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': usernameFocused && form.username.$error.required && !form.username.$pristine}">Username is required.</div>
                    <div class="help-block" ng-class="{'show': usernameFocused && usernameValidation.error}">{{usernameValidation.error}}</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <input type="password" placeholder="password" id="password" name="password" class="form-control" ng-model="model.password" required
                           ng-class="{ 'empty': !model.password, 'danger' : (form.password.$invalid && !form.password.$pristine) || passwordValidation.isValid === false }"
                           ng-focus="onPasswordFocus();" ng-blur="onPasswordBlur()">
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':passwordFocused || form.password.$valid}">
                        <i class="fa fa-lg fa-key"></i>
                    </span>
                    <gz-field-ok gz-when="form.password.$valid && passwordValidation.isValid === true"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': passwordFocused && form.password.$error.required && !form.password.$pristine}">Password is required.</div>
                    <div class="help-block help-block-3x" ng-class="{'show': passwordFocused && !form.password.$error.required && passwordValidation.isValid === false}">{{passwordValidation.error}}</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2" ng-show="passwordValidOnce">
                <div class="form-group">
                    <input type="password" placeholder="confirm password" id="confirmPassword" name="confirmPassword" class="form-control" ng-model="model.confirmPassword" required
                           ng-class="{ 'empty': !model.confirmPassword, 'danger' : model.confirmPassword !== model.password }"
                           ng-focus="confirmPasswordFocused = true;" ng-blur="confirmPasswordFocused = false;">
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':confirmPasswordFocused || (form.password.$valid && model.confirmPassword === model.password)}">
                        <i class="fa fa-lg fa-key"></i>
                    </span>
                    <gz-field-ok gz-when="form.password.$valid && passwordValidation.isValid && model.confirmPassword === model.password"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': confirmPasswordFocused && form.confirmPassword.$error.required && !form.confirmPassword.$pristine}">Confirm Password is required.</div>
                    <div class="help-block help-block-2x" ng-class="{'show': confirmPasswordFocused && !form.confirmPassword.$error.required && model.confirmPassword !== model.password}">Password did not match, double check so both fields have the same password.</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group text-center">
                    <div class="btns">
                        <button type="submit" class="btn-gz next" ng-disabled="form.$invalid || !emailValidation.isAvailable || !usernameValidation.isAvailable || !passwordValidation.isValid">Next</button>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 splitter"></div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <div class="text-center">Already a member?</div>
                    <div class="btns text-center">
                        <button type="submit" class="btn-gz" ng-click="backToLogin()">Login now</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

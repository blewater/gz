<div class="auth login">
    <div class="row heading">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2 text-center">
            <h2 class="text-gz">Welcome back!</h2>
            <h4>enter your credentials</h4>
        </div>
    </div>
    <div class="row content bg-gz">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2">
            <div class="logo-icon text-center">
                <img src="/Content/Images/logo.svg">
            </div>
        </div>
        <form class="form-horizontal" name="form" ng-submit="submit()" role="form" novalidate>
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <input type="text" placeholder="username / email" id="usernameOrEmail" name="usernameOrEmail" class="form-control" ng-model="model.usernameOrEmail" autocomplete="off" required
                           ng-class="{ 'empty': !model.usernameOrEmail, 'danger': !form.usernameOrEmail.$pristine && (errorMsg || form.usernameOrEmail.$invalid) }"
                           ng-focus="usernameOrEmailFocused = true" ng-blur="usernameOrEmailFocused = false" autofocus ng-pattern="/^[a-zA-Z0-9]+[a-zA-Z0-9-._]*(?!@)$|^.*@\w+\.[\w.]+$/i">
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':usernameOrEmailFocused || form.usernameOrEmail.$valid}">
                        <i class="fa fa-lg fa-user"></i>
                    </span>
                    <gz-field-ok gz-when="form.usernameOrEmail.$valid"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': usernameOrEmailFocused && !form.usernameOrEmail.$pristine && form.usernameOrEmail.$error.required}">Username or Email is required</div>
                    <div class="help-block" ng-class="{'show': usernameOrEmailFocused && !form.usernameOrEmail.$pristine && !form.usernameOrEmail.$error.required && form.usernameOrEmail.$invalid && usernameOrEmailContainsAt()}">Email is invalid</div>
                    <div class="help-block" ng-class="{'show': usernameOrEmailFocused && !form.usernameOrEmail.$pristine && !form.usernameOrEmail.$error.required && form.usernameOrEmail.$invalid && !usernameOrEmailContainsAt()}">Username is invalid</div>
                </div>
            </div>
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <input type="password" placeholder="********" id="password" name="password" class="form-control" ng-model="model.password" required
                           ng-class="{ 'empty': !model.password, 'danger' : !form.password.$pristine && (errorMsg || form.password.$invalid) }"
                           ng-focus="passwordFocused = true" ng-blur="passwordFocused = false">
                    <span class="form-control-feedback" aria-hidden="true" ng-class="{'focused':passwordFocused || form.password.$valid}">
                        <i class="fa fa-lg fa-key"></i>
                    </span>
                    <gz-field-ok gz-when="form.password.$valid"></gz-field-ok>
                    <div class="help-block" ng-class="{'show': passwordFocused && !form.password.$pristine && form.password.$error.required}">Password is required</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2" ng-if="model.showCaptcha">
                <div class="form-group">
                    <div vc-recaptcha key="reCaptchaPublicKey" name="recaptcha" class="recaptcha-wrap" ng-model="model.recaptcha" on-create="setWidgetId(widgetId)"></div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <div class="help-block" ng-class="{'show': form.$submitted && errorMsg}">{{errorMsg}}</div>
                </div>
            </div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <div class="btns text-center">
                        <button type="submit" class="btn-gz login" ng-disabled="form.$invalid"
                                ng-mouseenter="hovered = true" ng-mouseleave="hovered = false">
                            <span ng-show="waiting && !hovered" us-spinner="spinnerGreen"></span>
                            <span ng-show="waiting && hovered" us-spinner="spinnerWhite"></span>
                            <span ng-show="!waiting">Login</span>
                        </button>
                    </div>
                    <div class="btns text-center">
                        <a class="text-gz" ng-click="forgotPassword()">Forgot password?</a>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 splitter"></div>

            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                    <div class="text-center">Not a member?</div>
                    <div class="btns text-center">
                        <button type="button" class="btn-gz" ng-click="signup()">Sign up now</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>